"""
#       Sesión 10: Assignment-08
#       Andrés Rodríguez Cantú ─ A01287002
#
#       Copyright (C) Tecnológico de Monterrey
#
#       Archivo: dotsorter.py
#
#       Creado:                   20/02/2024
#       Última Modificación:      20/02/2024
"""

import re

# Define a function to process the given input
def process_input(data):
    result = []
    lines = data.strip().split("\n")
    
    for line in lines:
        # Separate the expression and the range part
        equation, range_part = line.split(": ")
        
        # Handle \left(\right), \l, \f, \r
        equation = re.sub(r"\\left\((.*?)\\right\)", r"(\1)", equation)  # Handle \left(\right)
        equation = re.sub(r"\\l", r"l", equation)  # Handle \l
        equation = re.sub(r"\\f", r"f", equation)  # Handle \f
        equation = re.sub(r"\\r", r"r", equation)  # Handle \r
        equation = re.sub(r"x\^2", "x^2", equation)  # Fix power notation

        # Append the formatted string
        result.append(f"{equation} : {range_part}")

    return "\n".join(result)


# Input data (truncated for brevity)
input_data = """
\\frac{5499929530247629 x^{3}}{281474976710656} - \\frac{740574600098061 x^{2}}{35184372088832} + \\frac{2402949811188315 x}{281474976710656}: 0 < x < 0.1336809037 
\\frac{8910398085113831 x}{2251799813685248} + \\frac{5499929530247665 \\left(x - 0.1336809037\\right)^{3}}{281474976710656} - \\frac{3718890151115031 \\left(x - 0.1336809037\\right)^{2}}{281474976710656} + 0.282788290735925 : 0.1336809037 < x < 0.3208341688 
\\frac{4795554777714589 x}{4503599627370496} + \\frac{5593807551029947 \\left(x - 0.3208341688\\right)^{3}}{562949953421312} - \\frac{5047206743182009 \\left(x - 0.3208341688\\right)^{2}}{2251799813685248} + 0.876014868359661 : 0.3208341688 < x < 0.6149321569 
\\frac{5234975110860567 x}{2251799813685248} - \\frac{3218947196916469 \\left(x - 0.6149321569\\right)^{3}}{281474976710656} + \\frac{3673580953933987 \\left(x - 0.6149321569\\right)^{2}}{562949953421312} + 0.160115022616242 : 0.6149321569 < x < 0.9625025065 
\\frac{1529207056959043 x}{562949953421312} + \\frac{3986589082982499 \\left(x - 0.9625025065\\right)^{3}}{562949953421312} - \\frac{6078565323046393 \\left(x - 0.9625025065\\right)^{2}}{1125899906842624} + 0.0913253748547382 : 0.9625025065 < x < 1.203128133 
\\frac{6072218154318925 x}{4503599627370496} - 0.235752670147546 \\left(0.831166666767653 x - 1\\right)^{3} - 0.415153434159298 \\left(0.831166666767653 x - 1\\right)^{2} + 1.52340847669918 : 1.203128133 < x < 1.764587929 
\\frac{4045246617206919 x}{4503599627370496} - 0.117936753741661 \\left(0.566704545330708 x - 1\\right)^{3} - 1.60302343040475 \\left(0.566704545330708 x - 1\\right)^{2} + 2.20324019959833 : 1.764587929 < x < 2.486464809 
\\frac{1093472331532455 x}{9007199254740992} + 8.19614325720262 \\left(0.402177419274306 x - 1\\right)^{3} - 3.47025040509094 \\left(0.402177419274306 x - 1\\right)^{2} + 3.85844019488145 : 2.486464809 < x < 3.235077869 
\\frac{6391435781123143 x}{36028797018963968} - 15.6561738042238 \\left(0.309111570260011 x - 1\\right)^{3} + 6.65729213545308 \\left(0.309111570260011 x - 1\\right)^{2} + 3.58640028875845 : 3.235077869 < x < 4.01042711 
/frac{2970928456069269 x}{9007199254740992} + 1.17188154901565 /left(0.249350000030296 x - 1/right)^{3} - 7.06861483621846 /left(0.249350000030296 x - 1/right)^{2} + 3.14191196757573 : 4.01042711 < x < 4.785776352 
- /frac{5745101660325187 x}{18014398509481984} + 41.0064546823714 /left(0.20895251395985 x - 1/right)^{3} - 9.0981110718421 /left(0.20895251395985 x - 1/right)^{2} + 5.99097493701025 : 4.785776352 < x < 5.534389412 
- /frac{2564301864871835 x}{9007199254740992} - 53.4674496812803 /left(0.180688405812525 x - 1/right)^{3} + 13.5672782759199 /left(0.180688405812525 x - 1/right)^{2} + 5.73590788309631 : 5.534389412 < x < 6.309738654 
- /frac{3002335945069085 x}{18014398509481984} + 18.0027427025276 /left(0.158485169487338 x - 1/right)^{3} - 11.5743127968352 /left(0.158485169487338 x - 1/right)^{2} + 5.11042667707671 : 6.309738654 < x < 7.085087895 
- /frac{2198804310099129 x}{4503599627370496} + 168.054370081255 /left(0.14114150943783 x - 1/right)^{3} - 6.22577167636741 /left(0.14114150943783 x - 1/right)^{2} + 7.24740864953051 : 7.085087895 < x < 7.833700956 
/frac{4341348666978347 x}{36028797018963968} - 363.458017817964 /left(0.127653583614789 x - 1/right)^{3} + 57.5109362136952 /left(0.127653583614789 x - 1/right)^{2} + 2.60753810197278 : 7.833700956 < x < 8.609050197 
/frac{3786877694361979 x}{18014398509481984} + 357.929332482085 /left(0.116156832300556 x - 1/right)^{3} - 60.8826558160998 /left(0.116156832300556 x - 1/right)^{2} + 2.04614225610772 : 8.609050197 < x < 9.357663258 
- /frac{5517204598621571 x}{72057594037927936} - 61.6175439089913 /left(0.106864285712043 x - 1/right)^{3} + 38.3863581977514 /left(0.106864285712043 x - 1/right)^{2} + 4.50472193212636 : 9.357663258 < x < 10.1330125 
/frac{4211737763698709 x}{9007199254740992} - 407.809458017923 /left(0.0986873350842111 x - 1/right)^{3} + 27.0514079869435 /left(0.0986873350842111 x - 1/right)^{2} - 0.780809192479795 : 10.1330125 < x < 10.90836174 
/frac{6097611032433095 x}{36028797018963968} + 522.725659878426 /left(0.0916727941220622 x - 1/right)^{3} - 77.1378013199552 /left(0.0916727941220622 x - 1/right)^{2} + 2.44943012398079 : 10.90836174 < x < 11.6569748 
- /frac{8955344342577907 x}{72057594037927936} + 34.0084648857468 /left(0.0857855504671761 x - 1/right)^{3} + 34.809579814622 /left(0.0857855504671761 x - 1/right)^{2} + 5.67667678711466 : 11.6569748 < x < 12.43232404 
/frac{5614761252225363 x}{18014398509481984} - 918.26937647956 /left(0.0804354838872105 x - 1/right)^{3} + 47.3130644463936 /left(0.0804354838872105 x - 1/right)^{2} + 0.420660868661632 : 12.43232404 < x < 13.20767328 
- /frac{5438901739686337 x}{72057594037927936} + 1674.7170230863 /left(0.0757135627752294 x - 1/right)^{3} - 140.50443768576 /left(0.0757135627752294 x - 1/right)^{2} + 5.4954462367053 : 13.20767328 < x < 13.95628634 
- /frac{4275935381888321 x}{72057594037927936} - 1447.60658263857 /left(0.0716522988736558 x - 1/right)^{3} + 161.082687250333 /left(0.0716522988736558 x - 1/right)^{2} + 5.1237641052504 : 13.95628634 < x < 14.73163559 
/frac{4732152524540761 x}{18014398509481984} + 300.495976676409 /left(0.0678811252077679 x - 1/right)^{3} - 89.342017463485 /left(0.0678811252077679 x - 1/right)^{2} + 0.628719446097387 : 14.73163559 < x < 15.50698483 
- /frac{3714263910464085 x}{18014398509481984} + 1130.96760293764 /left(0.0644870689539457 x - 1/right)^{3} - 46.4213677475262 /left(0.0644870689539457 x - 1/right)^{2} + 7.69580972918433 : 15.50698483 < x < 16.25559789 
/frac{2119108913100053 x}{144115188075855872} - 1250.70347060354 /left(0.0615172697286744 x - 1/right)^{3} + 128.980143247299 /left(0.0615172697286744 x - 1/right)^{2} + 4.12421112942236 : 16.25559789 < x < 17.03094713 
/frac{8880768967177837 x}{36028797018963968} - 461.793940786973 /left(0.0587166404996056 x - 1/right)^{3} - 54.8677362130054 /left(0.0587166404996056 x - 1/right)^{2} + 0.334382894390688 : 17.03094713 < x < 17.80629637 
- /frac{3881063949667135 x}{18014398509481984} + 2961.05563253261 /left(0.056159909911687 x - 1/right)^{3} - 128.921447134306 /left(0.056159909911687 x - 1/right)^{2} + 8.40240909730695 : 17.80629637 < x < 18.55490943 
/frac{4147194485544555 x}{72057594037927936} - 4184.87722086323 /left(0.0538940922224701 x - 1/right)^{3} + 265.539614964615 /left(0.0538940922224701 x - 1/right)^{2} + 3.3291542852163 : 18.55490943 < x < 19.33025867 
/frac{2597921890751625 x}{36028797018963968} + 3419.59159778702 /left(0.0517323651520489 x - 1/right)^{3} - 281.181955807815 /left(0.0517323651520489 x - 1/right)^{2} + 3.20615927219754 : 19.33025867 < x < 20.07887173 
- /frac{582313855216471 x}{2251799813685248} - 349.633935991582 /left(0.0498035952142616 x - 1/right)^{3} + 125.282837153841 /left(0.0498035952142616 x - 1/right)^{2} + 9.62326713011231 : 20.07887173 < x < 20.85422097 
/frac{2619057817834329 x}{18014398509481984} - 4653.15026388932 /left(0.047951923087348 x - 1/right)^{3} + 91.4532587183961 /left(0.047951923087348 x - 1/right)^{2} + 1.36513056659302 : 20.85422097 < x < 21.62957022 
- /frac{8175280877391155 x}{18014398509481984} + 10061.7610007035 /left(0.0462330036995067 x - 1/right)^{3} - 459.935306373852 /left(0.0462330036995067 x - 1/right)^{2} + 14.2129768130417 : 21.62957022 < x < 22.37818328 
- /frac{4576060803683459 x}{18014398509481984} - 17124.5014130889 /left(0.0446863799213642 x - 1/right)^{3} + 625.97723312819 /left(0.0446863799213642 x - 1/right)^{2} + 9.60809161864728 : 22.37818328 < x < 23.04658779 
- /frac{5684255555235355 x}{9007199254740992} + 23115.3991350654 /left(0.0433903712389868 x - 1/right)^{3} - 963.556548634873 /left(0.0433903712389868 x - 1/right)^{2} + 18.4001054125599 : 23.04658779 < x < 23.55457523 
- /frac{1139749468688629 x}{1125899906842624} - 15257.8125454169 /left(0.042454597046877 x - 1/right)^{3} + 590.135670016767 /left(0.042454597046877 x - 1/right)^{2} + 27.1590251113791 : 23.55457523 < x < 24.11603502 
- /frac{1038127710801879 x}{1125899906842624} + 12285.245950814 /left(0.0414661862603316 x - 1/right)^{3} - 525.111359368736 /left(0.0414661862603316 x - 1/right)^{2} + 25.1110140370157 : 24.11603502 < x < 24.704231 
- /frac{4841663571389929 x}{4503599627370496} - 2758.408791744 /left(0.0404788961048818 x - 1/right)^{3} + 392.266044552496 /left(0.0404788961048818 x - 1/right)^{2} + 28.7571915959411 : 24.704231 < x < 25.34589934 
- /frac{8578406166773267 x}{18014398509481984} - 4476.89704617096 /left(0.0394541139213725 x - 1/right)^{3} + 186.656424827528 /left(0.0394541139213725 x - 1/right)^{2} + 13.7946473640705 : 25.34589934 < x < 26.01430386 
- /frac{8219887068614189 x}{18014398509481984} + 6273.41966463143 /left(0.038440390539822 x - 1/right)^{3} - 176.48086559624 /left(0.038440390539822 x - 1/right)^{2} + 13.3246196538491 : 26.01430386 < x < 26.76291692 
- /frac{8921988268551413 x}{36028797018963968} - 12397.1469165721 /left(0.0373651348613909 x - 1/right)^{3} + 386.42515914175 /left(0.0373651348613909 x - 1/right)^{2} + 7.74360991824123 : 26.76291692 < x < 27.53826616 
- /frac{2600343911493811 x}{4503599627370496} + 33278.2008383438 /left(0.0363131067943749 x - 1/right)^{3} - 731.669967620939 /left(0.0363131067943749 x - 1/right)^{2} + 16.8474432217946 : 27.53826616 < x < 28.28687922 
/frac{2959543936341283 x}{4503599627370496} - 79866.4904783995 /left(0.0353520793942146 x - 1/right)^{3} + 2091.51975298361 /left(0.0353520793942146 x - 1/right)^{2} - 17.9460968566171 : 28.28687922 < x < 28.74139429 
/frac{952949009179523 x}{1125899906842624} + 31579.9176874164 /left(0.0347930232580237 x - 1/right)^{3} - 1815.33859250237 /left(0.0347930232580237 x - 1/right)^{2} - 23.1763919674643 : 28.74139429 < x < 29.46327117 
- /frac{2224510335399317 x}{9007199254740992} - 13877.577064269 /left(0.0339405626154036 x - 1/right)^{3} + 592.867156727957 /left(0.0339405626154036 x - 1/right)^{2} + 8.39272884731857 : 29.46327117 < x < 30.23862041 
- /frac{5997466405978413 x}{36028797018963968} - 15002.2596910613 /left(0.0330702917805502 x - 1/right)^{3} - 529.538710265831 /left(0.0330702917805502 x - 1/right)^{2} + 6.1159690488871 : 30.23862041 < x < 30.80008021
"""

# Process the input data and print the output
formatted_data = process_input(input_data)
print(formatted_data)
